@grammar test;

@terminals
    EPS: "EPS";
    LB: "\\(";
    RB: "\\)";
    VBAR: "\\|";
    L: "[a-zA-Z]";
    STAR: "\\*";

@start: r;

@rules
    r returns[int x]: u r_;
    r_ returns[int x, int y]: VBAR u r_ |
        EPS;
    u: c u_;
    u_: c u_ |
        EPS;
    c: k c_;
    c_: STAR c_ |
        EPS;
    k: LB r RB |
        L;